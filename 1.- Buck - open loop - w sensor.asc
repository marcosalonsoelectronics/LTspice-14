Version 4
SHEET 1 2008 1268
WIRE -144 -656 -416 -656
WIRE 144 -656 -144 -656
WIRE 144 -592 144 -656
WIRE -128 -512 -176 -512
WIRE -64 -512 -128 -512
WIRE 64 -512 0 -512
WIRE 96 -512 64 -512
WIRE -32 -448 -32 -496
WIRE 80 -448 -32 -448
WIRE 144 -448 144 -496
WIRE 144 -448 80 -448
WIRE -416 -432 -416 -656
WIRE 144 -320 144 -448
WIRE 304 -320 144 -320
WIRE 592 -320 384 -320
WIRE 688 -320 592 -320
WIRE 752 -320 688 -320
WIRE 864 -320 752 -320
WIRE 1008 -320 928 -320
WIRE 1088 -320 1008 -320
WIRE 1376 -320 1280 -320
WIRE 1520 -320 1376 -320
WIRE 592 -256 592 -320
WIRE 752 -256 752 -320
WIRE 144 -240 144 -320
WIRE 1152 -144 1088 -144
WIRE 1184 -144 1184 -256
WIRE 1184 -144 1152 -144
WIRE 592 -128 592 -192
WIRE 672 -128 592 -128
WIRE 752 -128 752 -176
WIRE 752 -128 672 -128
WIRE -416 -112 -416 -352
WIRE 144 -112 144 -176
WIRE 672 -112 672 -128
WIRE 64 80 0 80
WIRE 128 80 64 80
WIRE 0 128 0 80
WIRE 0 128 -32 128
WIRE 1520 128 1520 -320
WIRE 64 160 -32 160
WIRE 128 160 64 160
WIRE 1392 160 1280 160
WIRE 1488 160 1392 160
WIRE 1696 160 1552 160
WIRE -176 192 -320 192
FLAG -416 -112 0
FLAG 672 -112 0
FLAG 688 -320 out
FLAG 144 -112 0
FLAG -144 -656 dc
FLAG 64 -512 gate
FLAG 80 -448 source
FLAG -128 -512 pwm
FLAG 1008 -320 vsense
FLAG 1376 -320 voutd
FLAG 1152 -144 clk
FLAG 64 160 pwm
FLAG 64 80 ramp
FLAG 1392 160 err
SYMBOL voltage -416 -448 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL nmos 96 -592 R0
SYMATTR InstName M1
SYMATTR Value IRFZ48N
SYMBOL schottky 160 -176 R180
WINDOW 0 88 53 Left 2
WINDOW 3 55 22 Left 2
SYMATTR InstName D1
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 576 -256 R0
WINDOW 0 -57 7 Left 2
WINDOW 3 -60 42 Left 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.15
SYMBOL res 736 -272 R0
SYMATTR InstName R8
SYMATTR Value 2
SYMBOL ind2 288 -304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 50µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=0.05
SYMBOL Control\\driver -32 -512 R0
WINDOW 3 32 41 Bottom 2
SYMATTR Value k=15
SYMATTR InstName U1
SYMBOL Control\\gain 896 -320 R0
WINDOW 3 -3 77 Bottom 2
SYMATTR Value A=0.5
SYMATTR InstName U5
SYMBOL Control\\adc 1184 -384 R0
WINDOW 3 28 149 Left 2
WINDOW 123 35 180 Left 2
WINDOW 39 37 213 Left 2
SYMATTR InstName U6
SYMBOL Control\\clk 1056 -144 R0
WINDOW 3 0 79 Bottom 2
WINDOW 123 5 110 Bottom 2
WINDOW 39 8 146 Bottom 2
SYMATTR Value2 SR=1e8 ton={0.2*Tsamp}
SYMATTR SpiceLine f={1/Tsamp}
SYMATTR InstName U7
SYMBOL Control\\dpwm -128 144 R0
WINDOW 3 24 107 Bottom 2
WINDOW 123 24 138 Bottom 2
WINDOW 39 22 166 Bottom 2
SYMATTR Value f=200k nbits=5
SYMATTR InstName U11
SYMBOL Control\\constant -352 192 R0
WINDOW 3 -3 67 Bottom 2
SYMATTR Value K=16
SYMATTR InstName U12
SYMBOL Control\\constant 1728 160 M0
WINDOW 3 -13 72 Bottom 2
SYMATTR Value K=127
SYMATTR InstName U3
SYMBOL Control\\sub2 1520 160 R180
SYMATTR InstName U4
TEXT 392 -528 Left 2 !.tran 300u uic
TEXT 464 -184 Left 2 ;ESR=0.15
TEXT 296 -272 Left 2 ;DCR=0.05
TEXT 1064 -440 Left 2 !.param Tsamp=2u
TEXT 416 -480 Left 2 !.options reltol=1
