Version 4
SHEET 1 2008 1268
WIRE -144 -656 -416 -656
WIRE 144 -656 -144 -656
WIRE 144 -592 144 -656
WIRE -224 -512 -272 -512
WIRE -64 -512 -224 -512
WIRE 64 -512 0 -512
WIRE 96 -512 64 -512
WIRE -32 -448 -32 -496
WIRE 80 -448 -32 -448
WIRE 144 -448 144 -496
WIRE 144 -448 80 -448
WIRE -416 -432 -416 -656
WIRE 144 -320 144 -448
WIRE 304 -320 144 -320
WIRE 592 -320 384 -320
WIRE 688 -320 592 -320
WIRE 752 -320 688 -320
WIRE 944 -320 752 -320
WIRE 1088 -320 1008 -320
WIRE 1168 -320 1088 -320
WIRE 1424 -320 1360 -320
WIRE 1456 -320 1424 -320
WIRE 592 -256 592 -320
WIRE 752 -256 752 -320
WIRE 144 -240 144 -320
WIRE 1232 -144 1168 -144
WIRE 1264 -144 1264 -256
WIRE 1264 -144 1232 -144
WIRE 592 -128 592 -192
WIRE 672 -128 592 -128
WIRE 752 -128 752 -176
WIRE 752 -128 672 -128
WIRE -416 -112 -416 -352
WIRE 144 -112 144 -176
WIRE 672 -112 672 -128
WIRE -176 64 -208 64
WIRE -128 64 -176 64
WIRE -272 96 -272 -512
WIRE -128 96 -272 96
WIRE 176 128 16 128
FLAG -416 -112 0
FLAG 672 -112 0
FLAG 688 -320 out
FLAG 144 -112 0
FLAG -144 -656 dc
FLAG 64 -512 gate
FLAG 80 -448 source
FLAG -224 -512 pwm
FLAG 1088 -320 vsense
FLAG 1424 -320 voutd
FLAG -176 64 ramp
FLAG 1232 -144 CLK
SYMBOL voltage -416 -448 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL nmos 96 -592 R0
SYMATTR InstName M1
SYMATTR Value IRFZ48N
SYMBOL schottky 160 -176 R180
WINDOW 0 88 53 Left 2
WINDOW 3 55 22 Left 2
SYMATTR InstName D1
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 576 -256 R0
WINDOW 0 -57 7 Left 2
WINDOW 3 -60 42 Left 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.15
SYMBOL res 736 -272 R0
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL ind2 288 -304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 50µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=0.05
SYMBOL Control\\driver -32 -512 R0
WINDOW 3 47 40 Bottom 2
SYMATTR Value k=15
SYMATTR InstName U1
SYMBOL Control\\dpwm -32 80 M0
WINDOW 3 24 107 Bottom 2
WINDOW 123 24 138 Bottom 2
WINDOW 39 22 166 Bottom 2
SYMATTR Value f=200k nbits=5
SYMATTR InstName U2
SYMBOL Control\\constant 208 128 M0
WINDOW 3 -3 67 Bottom 2
SYMATTR Value K=18
SYMATTR InstName U3
SYMBOL Control\\gain 976 -320 R0
WINDOW 3 -3 77 Bottom 2
SYMATTR Value A=0.5
SYMATTR InstName U4
SYMBOL Control\\adc 1264 -384 R0
WINDOW 3 28 149 Left 2
WINDOW 123 35 180 Left 2
WINDOW 39 37 213 Left 2
SYMATTR InstName U5
SYMBOL Control\\clk 1136 -144 R0
WINDOW 3 0 79 Bottom 2
WINDOW 123 5 110 Bottom 2
WINDOW 39 8 146 Bottom 2
SYMATTR Value2 SR=1e8 ton={0.2*Tsp}
SYMATTR SpiceLine f={1/Tsp}
SYMATTR InstName U6
TEXT 376 -528 Left 2 !.tran 250u uic
TEXT 464 -184 Left 2 ;ESR=0.15
TEXT 296 -272 Left 2 ;DCR=0.05
TEXT 368 -584 Left 2 !.options reltol=1
TEXT 712 -584 Left 2 !.param Tsp=2u
